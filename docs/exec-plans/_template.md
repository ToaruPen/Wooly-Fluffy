# Exec Plan: <タイトル>

## メタ情報

- 作成日: YYYY-MM-DD
- 作成者: @<handle>
- ステータス: Draft | Active | Completed
- 対象: issue-<n> | PR-<n> | その他

## 関連（参照のみ）

- Issue: <URL>
- PRD: `docs/prd/<...>.md`（任意）
- Epic: `docs/epics/<...>.md`（任意）
- PR: <URL>（任意）

## 目的 / 完了条件

- 目的: <1-3行>
- 完了条件: <箇条書き>

## 凍結スナップショット（実装開始時点）

外部Issue編集で揺れやすい情報を、ここに抜粋して凍結する。

- AC（抜粋）:
  - <...>
- 制約（抜粋）:
  - <...>
- 変更対象ファイル（推定）:
  - <...>

## 実行計画（Lightweight）

小さめのIssue向け。1周で完了する想定。

- 手順:
  1. <...>
  2. <...>
- 検証:
  - <テスト/手動検証/ログ>

## 実行計画（Heavyweight）

不確実性が高い/複数ステップ/外部依存がある場合のみ。

- リスク:
  - <...>
- 調査（必要なら）:
  - <調査項目/止め時>
- 分割（必要なら）:
  - <Issue分割案>

## 進捗ログ（append-only）

**記録粒度の目安:**

- 書くタイミング: ステップ完了時・ブロッカー発生時・方針転換時
- 書く内容: 「何をやったか」と「結果（成功/失敗/保留）」を1-2行で
- 書かなくていいもの: 細かい試行錯誤の全ログ（結果だけ残す）

例:

- YYYY-MM-DD: `src/foo.ts` にバリデーション追加。テスト全通過
- YYYY-MM-DD: DBマイグレーション失敗。原因調査中 → 判断ログに記録
- YYYY-MM-DD: <やったこと/結果>

## 判断ログ（append-only）

**記録粒度の目安:**

- 書くタイミング: 複数の選択肢を比較した時・方針を変えた時・リスクを受け入れた時
- 書く内容: 「何を選んだか」と「なぜか（根拠）」を1行で。詳細はリンク先に
- 書かなくていいもの: 自明な実装判断（ライブラリのAPIをそのまま使う等）

**重要な判断を `docs/decisions/` に昇格させる基準:**

- 他のIssueや将来の実装に影響する判断（アーキテクチャ・技術選定・廃止方針など）
- 「なぜそうしたか」を数ヶ月後に再現できる必要がある判断
- 上記に該当する場合は `docs/decisions/` に Decision 本文を作成し、ここにリンクを張る
- 詳細: `docs/decisions/README.md`

例:

- YYYY-MM-DD: ORMをSQLAlchemyに統一 / 根拠: 既存コードとの一貫性。詳細: `docs/decisions/d-YYYY-MM-DD-xxx.md`
- YYYY-MM-DD: エラー時はfail-fastを選択 / 根拠: フォールバックが要件にない
- YYYY-MM-DD: <判断> / 根拠: <リンクやログ>

## 未解決の疑問 / 保留

- <質問 or TODO>
