# Research (Estimation): issue-144

> このテンプレートは `/research estimation` コマンドで使用されます。
> 成果物は `docs/research/estimation/issue-<n>/<YYYY-MM-DD>.md` に保存します。

---

## メタ情報

- 作成日: 2026-02-28
- 作成者: @opencode
- 対象: 見積もり前調査
- Issue: #144 feat: /create-issues を汎用Issue発行コマンドへ改訂

---

## 1. 調査の目的

Issue #144 の実装見積もり前に、既存の Epic 起点フローとの後方互換を維持しながら `/create-issues` を汎用Issue発行コマンドに拡張するための変更面、fail-fast条件、検証項目を事前固定する。

---

## 2. 新規性判定（発火条件）

- 直接の先行事例が2件未満: Yes
- PRD/Epic/Issue に Unknown/曖昧さが残る: Yes
- Q6-5〜8（PII/監査/性能/可用性）のいずれかが Yes: No

---

## 3. 候補（必須: >= 5）

候補-1
概要: `/create-issues` を「起票モード選択 + 共通品質チェック」構造に再定義する
適用可否: Yes
仮説: 入力モードを明示分岐し、共通部分（粒度/依存/ラベル）を後段に統合すれば過剰分岐なしで仕様拡張できる
反証: モード追加で重複記述が増え、既存 Epic 起点フローの説明と矛盾する
採否理由: AC1/AC2/AC5 を同時に満たすために最小の設計変更であり、既存フローの位置づけも保持できる
根拠リンク:
- https://github.com/ToaruPen/Agentic-SDD/issues/144
- https://github.com/ToaruPen/Agentic-SDD/blob/main/.agent/commands/create-issues.md
捨て条件:
- モード分岐の導入により、Epic起点の既存手順を一意に説明できなくなる場合
リスク/検証:
- リスク: フロー説明が長文化し、運用者が必須入力を取り違える
- 検証方法: モード別の必須項目を箇条書きで固定し、欠落時停止条件を明文化する

候補-2
概要: 起票本文テンプレートを「共通必須」と「モード別追加」に分割する
適用可否: Yes
仮説: 共通必須項目（根拠リンク・目的・検証条件）を固定すれば、Epic/PRD参照なしケースでも追跡性を担保できる
反証: 非Epicケースで追跡情報が不足し、後続の /estimation で SoT 特定ができない
採否理由: AC4 の核心であり、テンプレ運用のみで実現可能なため実装コストが低い
根拠リンク:
- https://github.com/ToaruPen/Agentic-SDD/issues/144
- https://github.com/ToaruPen/Agentic-SDD/blob/main/.agent/rules/issue.md
捨て条件:
- 共通必須項目の定義が増えすぎ、Issue作成時の入力負荷が過大になる場合
リスク/検証:
- リスク: 既存テンプレとの併記で必須/任意の境界が曖昧化
- 検証方法: `.agent/rules/issue.md` に共通必須セクションを一箇所で定義し、例示を更新する

候補-3
概要: fail-fast 条件をモード別に定義し、欠落入力時は作成処理を開始しない
適用可否: Yes
仮説: `gh issue create` 前の必須入力チェックを明文化すれば、不完全Issueの作成を防止できる
反証: 必須判定が曖昧で、実質的に手動解釈が必要になる
採否理由: AC2 の要件を直接満たし、既存の fail-fast 方針（環境未準備時停止）とも整合する
根拠リンク:
- https://github.com/ToaruPen/Agentic-SDD/blob/main/.agent/commands/create-issues.md
- https://github.com/ToaruPen/Agentic-SDD/blob/main/AGENTS.md
捨て条件:
- モード別チェックを追加しても停止条件が観測可能に定義できない場合
リスク/検証:
- リスク: 停止条件の不足で「作れたが不備あり」の状態が残る
- 検証方法: 各モードで必須入力欠落ケースを想定し、停止メッセージの要件を先に文章化する

候補-4
概要: 既存粒度ルール・例外ラベル運用をそのまま継承する
適用可否: Yes
仮説: `.agent/rules/issue.md` の既存ルールを不変とすることで、仕様拡張後もレビュー基準を変えずに運用できる
反証: 汎用起票モードで既存ルールが適用不能となり、追加例外が常態化する
採否理由: AC3 を満たすための最短経路であり、変更範囲をコマンド説明中心に限定できる
根拠リンク:
- https://github.com/ToaruPen/Agentic-SDD/blob/main/.agent/rules/issue.md
- https://github.com/ToaruPen/Agentic-SDD/blob/main/.agent/commands/create-issues.md
捨て条件:
- 汎用起票ユースケースで LOC/Files/AC の定義自体を改定する必要が生じた場合
リスク/検証:
- リスク: ルールを保持したつもりでも説明更新漏れで実運用がずれる
- 検証方法: 粒度・例外ラベル章の文面差分を確認し、意味変更がないことをレビューする

候補-5
概要: README のワークフロー説明を「Epic起点専用」から「汎用起票対応」に更新する
適用可否: Yes
仮説: 公式導線を更新すれば、コマンド仕様変更後の誤用を減らせる
反証: README の手順がコマンド本文と不整合になり、SoT矛盾を新たに作る
採否理由: AC5 の後方互換説明と AC1 の適用範囲を利用者に伝える上で必須
根拠リンク:
- https://github.com/ToaruPen/Agentic-SDD/blob/main/README.md
- https://github.com/ToaruPen/Agentic-SDD/blob/main/.agent/commands/create-issues.md
捨て条件:
- README が実運用SoTでない方針になり、参照更新が不要と決まった場合
リスク/検証:
- リスク: ドキュメント同期漏れで `/sync-docs` 失敗要因を増やす
- 検証方法: コマンド定義と README の usage/flow を同時に更新し、用語を統一する

候補-6
概要: 非Epic起票時の最小参照情報を「根拠リンク・目的・検証条件」に固定する
適用可否: Partial
仮説: 3要素を固定すれば追跡可能性は確保できるが、将来拡張時に追加項目が必要になる
反証: 3要素だけでは /estimation 時に関連SoT特定が困難で、実務上不足する
採否理由: 現Issue範囲では最小要件として妥当だが、将来の運用実績に応じて見直し余地がある
根拠リンク:
- https://github.com/ToaruPen/Agentic-SDD/issues/144
- https://github.com/ToaruPen/Agentic-SDD/blob/main/.agent/rules/docs-sync.md
捨て条件:
- 追跡性レビューで「最小参照情報」が継続的に不足と判定される場合
リスク/検証:
- リスク: 必須項目が少なすぎて背景文脈の再現性が低下
- 検証方法: Issue本文テンプレに3要素を明示し、/estimation 入力に必要な情報が揃うか確認する

---

## 4. 隣接領域探索（新規性が高い場合は必須）

隣接領域-1
概要: GitHub Issue Forms の必須入力設計（不備入力を作成前に遮断する設計思想）
根拠リンク:
- https://docs.github.com/en/issues/tracking-your-work-with-issues/creating-issues/about-issue-and-pull-request-templates
- https://docs.github.com/en/issues/tracking-your-work-with-issues/creating-issues/about-issue-forms

隣接領域-2
概要: Conventional Commits の後方互換な拡張方針（既存利用者の運用断絶を避ける）
根拠リンク:
- https://www.conventionalcommits.org/en/v1.0.0/
- https://www.conventionalcommits.org/en/v1.0.0/#summary

抽象化-1
原理/パターン: 入力モード分岐と品質ゲートを分離し、共通制約を後段で再利用する

抽象化-2
原理/パターン: 最小必須項目を固定して fail-fast し、不完全な成果物作成を避ける

抽象化-3
原理/パターン: 既存パスを残した段階的拡張で後方互換を維持する

適用マッピング
- PRD: 「シンプル優先」と「互換性を壊す全面置き換えを避ける」制約に適合
- Epic: docs/commands/rules への小変更で汎用起票対応を導入する分割方針に適合
- Estimation: 変更対象を `.agent/commands/create-issues.md` / `.agent/rules/issue.md` / `README.md` に限定できる

---

## 5. 止め時（必須）

タイムボックス: 60min
打ち切り条件:
- AC1〜AC5 を満たすための変更対象と検証観点を列挙できた
- fail-fast 条件の定義単位（モード別必須入力）が明確になった
- 後方互換維持の対象（Epicからの一括作成パス）が特定できた

---

## 6. 探索ログ（必須）

- 何を調べたか: Issue #144 本文、`.agent/commands/create-issues.md`、`.agent/rules/issue.md`、`README.md`、PRD/Epic の制約を確認
- 何を除外したか: 実装スクリプト追加や新規依存導入（本Issueはコマンド/ルール文書改訂が主目的のため）
- 未解決: 非Epic起票で「最小参照情報」が将来運用で十分かは実績データが未確定

---

## 7. 見積もりへの反映サマリ

- 不確実性/リスク: 汎用化に伴う説明増加で fail-fast 条件が曖昧化しやすい
- 調査で減った不確実性: 変更範囲を 3 ファイルに限定し、AC対応の論点（モード分岐/共通テンプレ/後方互換）を固定できた
- テスト計画への影響: 実装時は文書整合テスト（必須項目、後方互換記述、粒度ルール維持）を中心にレビューする
